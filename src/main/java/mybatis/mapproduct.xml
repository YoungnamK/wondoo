<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="NsProduct">
	<sql id="basic_select">
		select * from products
	</sql>


	<!-- 검색 , 키워드 별 건수를 조회함 -->
	<select id="SelectTotalProductCount" parameterType="String" resultType="Integer">
		select count(*) from products where pro_category ='p'
		<if test="mode == 'pro_type'">
			and pro_type like #{keyword}  
		</if>
		<if test="mode == 'pro_name'">
			and pro_name like #{keyword}
		</if>
		
	</select>
	
	<select id="SelectAllProductData" resultType="MyProduct">
		<include refid="basic_select"/>
			where pro_category ='p'
		<if test="mode == 'pro_type'">
			and pro_type like #{keyword}  
		</if>
		<if test="mode == 'pro_name'">
			and pro_name like #{keyword} 
		</if>
		order by products_seq desc
	</select>
	
	<!-- 검색 , 키워드 별 건수를 조회함 -->
	<select id="SelectTotalCoffeeCount" parameterType="String" resultType="Integer">
		select count(*) from products where pro_category ='c'
		<if test="mode == 'pro_type'">
			and where pro_type like #{keyword}  
		</if>
		<if test="mode == 'pro_name'">
			and where pro_name like #{keyword}  
		</if>
		
	</select>
	
	<select id="SelectAllCoffeeData" resultType="MyProduct">
		<include refid="basic_select"/>
		where pro_category ='c'
		<if test="mode == 'pro_type'">
			and where pro_type like #{keyword} 
		</if>
		<if test="mode == 'pro_name'">
			and where pro_name like #{keyword} 
		</if>
		 order by products_seq desc
	</select>
	
	
	<!-- 가장 최근 등록 수업 3개 가져오기 (메인화면용) -->
	<select id="ShowMainView" resultType="MyProduct">
		<include refid="basic_select"/>
		order by products_seq desc
	</select>
	
	<select id="SelectOneData" parameterType="Integer" resultType="MyProduct">
		<include refid="basic_select"/>
		where products_seq=#{products_seq}
	</select>
</mapper>